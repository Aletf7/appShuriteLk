<form [formGroup]="form" (ngSubmit)="submit()" class="student-form">
  <!-- üßç Datos del estudiante -->
  <mat-form-field appearance="outline">
    <mat-label>Nombre</mat-label>
    <input matInput formControlName="name" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Apellidos</mat-label>
    <input matInput formControlName="surname" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Fecha de nacimiento</mat-label>
    <input
      matInput
      [matDatepicker]="picker"
      formControlName="fechaNacimiento"
    />
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>DNI</mat-label>
    <input matInput formControlName="dni" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Pasaporte</mat-label>
    <input matInput formControlName="pasaporte" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Tel√©fono</mat-label>
    <input matInput formControlName="telefono" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Correo electr√≥nico</mat-label>
    <input matInput formControlName="correo" type="email" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Club</mat-label>
    <input matInput formControlName="club" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Identificador</mat-label>
    <input matInput formControlName="identificador" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Informaci√≥n adicional</mat-label>
    <textarea matInput formControlName="informacionAdicional"></textarea>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Actividad</mat-label>
    <input matInput formControlName="actividad" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>N¬∫ licencia federativa</mat-label>
    <input matInput formControlName="licenciaFederativa" />
  </mat-form-field>
  <!-- Solo visible para administradores -->
  <div *ngIf="isAdmin">
    <!-- Selector de cintur√≥n -->
    <mat-form-field appearance="outline">
      <mat-label>Cintur√≥n</mat-label>
      <mat-select formControlName="belt">
        <mat-option *ngFor="let b of belt" [value]="b">{{ b }}</mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Verificaci√≥n del usuario -->
    <mat-checkbox formControlName="isTrusted">Usuario verificado</mat-checkbox>
  </div>

  <div class="file-field">
    <label for="fotografia">Fotograf√≠a</label>
    <input
      type="file"
      id="fotografia"
      (change)="onFileChange($event, 'fotografia')"
    />
  </div>

  <!-- üë∂ Menor de edad -->
  <mat-checkbox formControlName="menorEdad">¬øEs menor de edad?</mat-checkbox>

  <!-- üë®‚Äçüë©‚Äçüëß Datos del tutor -->
  <div *ngIf="form.get('menorEdad')?.value" [formGroup]="tutorGroup">
    <h3>üë®‚Äçüë©‚Äçüëß Datos del Tutor</h3>

    <mat-form-field appearance="outline">
      <mat-label>Nombre del tutor</mat-label>
      <input matInput formControlName="nombre" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Apellidos del tutor</mat-label>
      <input matInput formControlName="apellidos" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>DNI del tutor</mat-label>
      <input matInput formControlName="dni" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Tel√©fono del tutor</mat-label>
      <input matInput formControlName="telefono" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Correo electr√≥nico del tutor</mat-label>
      <input matInput formControlName="correo" type="email" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Direcci√≥n</mat-label>
      <input matInput formControlName="direccion" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Poblaci√≥n</mat-label>
      <input matInput formControlName="poblacion" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>C√≥digo Postal</mat-label>
      <input matInput formControlName="cp" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Provincia</mat-label>
      <input matInput formControlName="provincia" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Informaci√≥n adicional</mat-label>
      <textarea matInput formControlName="informacionAdicional"></textarea>
    </mat-form-field>

    <div class="file-field">
      <label for="nifAnverso">NIF/NIE anverso</label>
      <input
        type="file"
        id="nifAnverso"
        (change)="onFileChange($event, 'nifAnverso', tutorGroup)"
      />
    </div>

    <div class="file-field">
      <label for="nifReverso">NIF/NIE reverso</label>
      <input
        type="file"
        id="nifReverso"
        (change)="onFileChange($event, 'nifReverso', tutorGroup)"
      />
    </div>
  </div>

  <!-- üìú Cl√°usulas legales -->
  <h3>üìú Cl√°usulas legales</h3>
  <mat-checkbox formControlName="clausula1">Acepto la cl√°usula 1</mat-checkbox>
  <mat-checkbox formControlName="clausula2">Acepto la cl√°usula 2</mat-checkbox>
  <mat-checkbox formControlName="clausula3">Acepto la cl√°usula 3</mat-checkbox>
  <mat-checkbox formControlName="clausula4">Acepto la cl√°usula 4</mat-checkbox>

  <!-- ‚úÖ Bot√≥n de registro -->
  <div class="form-actions">
    <button mat-raised-button color="primary" (click)="submit()">
      {{ isEditMode ? "Guardar" : "Registrarse" }}
    </button>

    <button
      mat-button
      color="warn"
      [routerLink]="isEditMode ? '/students' : '/login'"
    >
      {{ isEditMode ? "Cancelar" : "Iniciar sesi√≥n" }}
    </button>
  </div>
</form>
