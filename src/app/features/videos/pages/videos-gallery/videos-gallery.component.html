<h2>ðŸŽ¥ Katas disponibles para nivel {{ userLevel | titlecase }}</h2>

<button mat-button (click)="toggleInferiores()" color="primary" style="margin-bottom: 1rem;">
  {{ mostrarInferiores ? 'ðŸ”’ Ver solo mi nivel' : 'ðŸ”“ Ver tambiÃ©n niveles inferiores' }}
</button>

<div *ngIf="videos.length > 0; else noVideos">
  <mat-card *ngFor="let video of videos" style="margin-bottom: 1.5rem;">
    <mat-card-header>
      <mat-card-title>{{ video.title }}</mat-card-title>
      <mat-card-subtitle>
        Nivel: {{ video.level | titlecase }}
        <span *ngIf="haVisto(video.id)" style="color: green;">âœ… Visto</span>
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p>{{ video.description }}</p>

      <ng-container *ngIf="video.url.endsWith('.mp4'); else embedVideo">
        <video width="100%" controls (play)="onVideoPlayed(video.id)">
          <source [src]="video.url | safeUrl" type="video/mp4" />
          Tu navegador no soporta el vÃ­deo.
        </video>
      </ng-container>

      <ng-template #embedVideo>
        <iframe
          [src]="video.url | safeUrl"
          width="100%"
          height="315"
          frameborder="0"
          allowfullscreen
          (load)="onVideoPlayed(video.id)"
        ></iframe>
      </ng-template>
    </mat-card-content>
  </mat-card>
</div>

<ng-template #noVideos>
  <mat-card>
    <mat-card-content>
      <p style="text-align: center; font-size: 1.1rem;">
        ðŸ’¤ No hay vÃ­deos disponibles para tu nivel aÃºn.<br />
        Â¡Vuelve pronto, estamos subiendo contenido nuevo!
      </p>
    </mat-card-content>
  </mat-card>
</ng-template>
